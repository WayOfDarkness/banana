{% extends "layout.twig" %}

{% block pre_include %}
    <title>Bảng xếp hạng</title>
    <link href="https://fonts.googleapis.com/css?family=Patrick+Hand" rel="stylesheet">
    <style>
        body {
            background-color: #000000;
            color: #FFFFFF;
            text-align: center;
            margin: 0;
            overflow: hidden;
        }
        .page-article .layout-container {
            display: flex !important;
        }
    </style>
{% endblock %}

{% block post_include %}
    <script>
        function loadRanking(url) {
            $.ajax({
                url: url,
                type: 'GET',
                success: function (data) {
                    var html = '';
                    for (var i = 0; i < data.customer.length; i++) {
                        if (data.customer[i].point > 0) {
                            html += `<div>
                                <div>${i+1}</div>
                                <img src="/uploads/${data.customer[i].avatar}" alt="${data.customer[i].name}" />
                                <div>${data.customer[i].name}</div>
                                <div>${data.customer[i].point}</div>
                            </div><br>`;
                        }
                    }
                    $('.ranking').html(html);
                }
            });
        }

        $(document).ready(function () {
            option_url = 'api/customer?page=1&sortby=point';
            loadRanking(option_url);
        })
    </script>
{% endblock %}

{% block content %}

    <h2>Bảng xếp hạng hiện tại của các người chơi!</h2>
    <div class="ranking"></div>

{% endblock content %}